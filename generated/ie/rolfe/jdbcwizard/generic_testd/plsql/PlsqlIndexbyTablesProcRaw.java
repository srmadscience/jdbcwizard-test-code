package ie.rolfe.jdbcwizard.generic_testd.plsql;

import java.sql.*; 
import oracle.jdbc.OracleTypes;
import com.orindasoft.pub.LogInterface; 
import com.orindasoft.pub.StatsInterface; 
import com.orindasoft.pub.OracleResourceUser; 
import com.orindasoft.pub.CSException; 
import com.orindasoft.pub.PlsqlIndexByTable2; 
             
/** 
* PlsqlIndexbyTablesProcRaw - Access Procedure PLSQL_INDEXBY_TABLES.PROC_RAW
* Generated by JDBCWizard 6.0.3145 build 3145 at 2025/11/14 10:13:51.61 EST
*/ 
public class PlsqlIndexbyTablesProcRaw extends AbstractProcCall implements OracleResourceUser, StatsInterface 
{
  public com.orindasoft.pub.PlsqlIndexByTable2 paramP1
   = new com.orindasoft.pub.PlsqlIndexByTable2(oracle.jdbc.OracleTypes.VARCHAR,0);
  public com.orindasoft.pub.PlsqlIndexByTable2 paramP2
   = new com.orindasoft.pub.PlsqlIndexByTable2(oracle.jdbc.OracleTypes.VARCHAR,0);
  public com.orindasoft.pub.PlsqlIndexByTable2 paramP3
   = new com.orindasoft.pub.PlsqlIndexByTable2(oracle.jdbc.OracleTypes.VARCHAR,0);
  public Boolean paramStatus = null;
   
  public static final String procName = "PLSQL_INDEXBY_TABLES.PROC_RAW";   
                                                    
  public static final int PROC_TYPE = AbstractProcCall.THIS_USERS_OBJECT; 
   
  private StringBuffer procCall = null;
   
  public PlsqlIndexbyTablesProcRaw (Connection theConnection, LogInterface theLog) 
    {                                                             
    super(theConnection, theLog);                                 
    theLog.debug("PlsqlIndexbyTablesProcRaw started");  //DEBUG                  
    }                                                             
   
   
  public void setParamP1(com.orindasoft.pub.PlsqlIndexByTable2 paramP1)
    {
    this.paramP1 = paramP1;
    this.paramP1.setRealDataType(oracle.jdbc.OracleTypes.VARCHAR);
    }
   
  public void setParamP2(com.orindasoft.pub.PlsqlIndexByTable2 paramP2)
    {
    this.paramP2 = paramP2;
    this.paramP2.setRealDataType(oracle.jdbc.OracleTypes.VARCHAR);
    }
   
   
  public com.orindasoft.pub.PlsqlIndexByTable2 getParamP2()
    {
    return(paramP2);
    }
  
  public void setMaxRowsForParamP2(int maxRows)
    {
    paramP2.setElementMaxCount(maxRows);
    }
   
  public com.orindasoft.pub.PlsqlIndexByTable2 getParamP3()
    {
    return(paramP3);
    }
  
  public void setMaxRowsForParamP3(int maxRows)
    {
    paramP3.setElementMaxCount(maxRows);
    }
   
  public Boolean getParamStatusBooleanObj()
    {
    if (paramStatus == null)
      {
      return(null);
      }
     
    return (new Boolean(paramStatus.booleanValue()));
    }
   
  public boolean getParamStatusBoolean() 
    {
    return (paramStatus.booleanValue());
    }
   
  public boolean getParamStatusBoolean(boolean defaultValue) 
    {
    if (paramStatus == null)
      {
      return(defaultValue);
      }
     
    return (paramStatus.booleanValue());
    }
   
                                                                          
  protected void getStatementResults()  throws CSException 
    {                                                                   
    theLog.debug("Starting to unload data");
    startStatsTimer();
    
    theParameters.unloadParameters(theCallableStatement); 
    
    theLog.debug("Unloading parameter paramP2" );
    paramP2 =  (com.orindasoft.pub.PlsqlIndexByTable2)theParameters.getParam(3);
    
    theLog.debug("Unloading parameter paramP3" );
    paramP3 =  (com.orindasoft.pub.PlsqlIndexByTable2)theParameters.getParam(4);
    
    theLog.debug("Unloading parameter paramStatus" );
    if (   theParameters.getParam(5) == null 
        || ((java.math.BigDecimal)theParameters.getParam(5)).intValue() == 0)
      {
      paramStatus = null;
      }
    else if (((java.math.BigDecimal)theParameters.getParam(5)).intValue() == -1)
      {
      paramStatus = new Boolean(false);
      }
    else 
      {
      paramStatus = new Boolean(true);
      }
     
    try 
      { 
      theCallableStatement.clearParameters(); 
      theParameters.clearParameters(); 
      } 
    catch (SQLException e) 
      {
      throw (new CSException("getStatementResults: Unable to clear parameters:" + e.toString())); 
      }
    incRetrieveTime();
    theLog.debug("Finished unloading data");
    }     
            
                                                                          
                                                                          
  protected void bindParams() throws CSException 
    {                                                                   
    theLog.debug("Starting to bind parameters");
    
    theLog.debug("binding input parameter paramP1 to position 1");
    try  
      {  
      paramP1.setDataType(oracle.jdbc.OracleTypes.RAW);
      paramP1.setElementMaxLength(4000);
      theParameters.setPlSqlIndexArrayParam(1,paramP1);
      }   
    catch (Exception e)   
      {           
      throw (new CSException("PL/SQL Index By Table Input Parameter paramP1  could not be loaded:" + e.toString()));   
      }          
         
    
    theLog.debug("binding input parameter paramP2 to position 2");
    try  
      {  
      paramP2.setDataType(oracle.jdbc.OracleTypes.RAW);
      paramP2.setElementMaxLength(4000);
      theParameters.setPlSqlIndexArrayParam(2,paramP2);
      }   
    catch (Exception e)   
      {           
      throw (new CSException("PL/SQL Index By Table Input Parameter paramP2  could not be loaded:" + e.toString()));   
      }          
         
    theLog.debug("binding output parameter paramP2 to position 3" );
    try  
      {  
      theParameters.setPlSqlIndexArrayOutParam(3,paramP2);
      }   
    catch (Exception e)   
      {           
      throw (new CSException("PL/SQL Index By Table Output Parameter paramP2 could not be registered:" + e.toString()));   
      }          
         
    theLog.debug("binding output parameter paramP3 to position 4" );
    try  
      {  
      paramP3.setDataType(oracle.jdbc.OracleTypes.RAW);
      paramP3.setElementMaxLength(4000);
      theParameters.setPlSqlIndexArrayOutParam(4,paramP3);
      }   
    catch (Exception e)   
      {           
      throw (new CSException("PL/SQL Index By Table Output Parameter paramP3 could not be registered:" + e.toString()));   
      }          
         
    theLog.debug("binding output parameter paramStatus to position 5" );
    theParameters.setOutParam(5,OracleTypes.NUMBER);
    theLog.debug("Associating parameters with statement");
    theParameters.bindParameters(theCallableStatement); 
    theLog.debug("Finished binding parameters");
    }     
            
                                                                          
  public String getProcCallStatement()                                             
    {                                                              
    if (procCall == null)
      {                                                              
      procCall = new StringBuffer("DECLARE \n");
      procCall.append("/* Created  By JDBCWizard 6.0.3145 */ \n");
      procCall.append("/* Which can be obtained at www.orindasoft.com */ \n");
      procCall.append("TYPE P1_t IS TABLE OF VARCHAR2(4002) INDEX BY BINARY_INTEGER; \n");
      procCall.append("P1_v P1_t; \n");
      procCall.append("p1 PLSQL_INDEXBY_TABLES.INDEXBYTABRAW; \n");
      procCall.append("TYPE P2_t IS TABLE OF VARCHAR2(4002) INDEX BY BINARY_INTEGER; \n");
      procCall.append("P2_v P2_t; \n");
      procCall.append("p2 PLSQL_INDEXBY_TABLES.INDEXBYTABRAW; \n");
      procCall.append("TYPE P3_t IS TABLE OF VARCHAR2(4002) INDEX BY BINARY_INTEGER; \n");
      procCall.append("P3_v P3_t; \n");
      procCall.append("p3 PLSQL_INDEXBY_TABLES.INDEXBYTABRAW; \n");
      procCall.append("status BOOLEAN := null; \n");
      procCall.append("STATUS_SN SIGNTYPE := null; \n");
      procCall.append("BEGIN  \n");
      procCall.append("P1_v := ?; \n");
      procCall.append("P2_v := ?; \n");
      procCall.append("STATUS_SN  := null; \n");
      procCall.append("  \n");
      procCall.append("FOR i IN P1_v.FIRST..P1_v.LAST LOOP \n");
      procCall.append(" p1(i) := HEXTORAW(P1_v(i)); \n");
      procCall.append("END LOOP; \n");
      procCall.append("  \n");
      procCall.append("FOR i IN P2_v.FIRST..P2_v.LAST LOOP \n");
      procCall.append(" p2(i) := HEXTORAW(P2_v(i)); \n");
      procCall.append("END LOOP; \n");
      procCall.append(" \n");
      procCall.append("PLSQL_INDEXBY_TABLES.PROC_RAW(p1 => p1,p2 => p2,p3 => p3,status => status); \n");
      procCall.append("  \n");
      procCall.append("P2_v.DELETE; \n");
      procCall.append("FOR i IN p2.FIRST..p2.LAST LOOP \n");
      procCall.append(" P2_v(i) := RAWTOHEX(p2(i)); \n");
      procCall.append("END LOOP; \n");
      procCall.append("  \n");
      procCall.append("FOR i IN p3.FIRST..p3.LAST LOOP \n");
      procCall.append(" P3_v(i) := RAWTOHEX(p3(i)); \n");
      procCall.append("END LOOP; \n");
      procCall.append("  \n");
      procCall.append("IF status IS NULL THEN  \n");
      procCall.append("  STATUS_SN := 0;  \n");
      procCall.append("ELSIF status = FALSE THEN  \n");
      procCall.append("  STATUS_SN := -1;  \n");
      procCall.append("ELSIF status = TRUE THEN  \n");
      procCall.append("  STATUS_SN := 1;  \n");
      procCall.append("END IF;  \n");
      procCall.append("  \n");
      procCall.append("? := P2_v; \n");
      procCall.append("? := P3_v; \n");
      procCall.append("? := STATUS_SN; \n");
      procCall.append("END; ");
      
      }     
    return(procCall.toString());
    }     
            
} // Generated by JDBCWizard 6.0.3145 
