package ie.rolfe.jdbcwizard.bytetest.plsql;

import java.sql.*; 
import oracle.jdbc.OracleTypes;
import com.orindasoft.pub.LogInterface; 
import com.orindasoft.pub.StatsInterface; 
import com.orindasoft.pub.OracleResourceUser; 
import com.orindasoft.pub.CSException; 
             
/** 
* BytetestthepackageNorm1 - Access Procedure BYTETESTTHEPACKAGE.NORM1
* Generated by JDBCWizard 6.0.3145 build 3145 at 2025/11/14 10:21:20.631 EST
*/ 
public class BytetestthepackageNorm1 extends AbstractProcCall implements OracleResourceUser, StatsInterface 
{
  public String filenamePInBlob = null;
  public byte[] byteArrayPInBlob = null;
  public oracle.sql.BLOB lobPInBlob = null;
  public String filenamePInClob = null;
  public char[] byteArrayPInClob = null;
  public oracle.sql.CLOB lobPInClob = null;
  public String filenamePOutBfile = null;
  public byte[] byteArrayPOutBfile = null;
  public oracle.sql.BFILE lobPOutBfile = null;
  public String filenamePOutBlon = null;
  public byte[] byteArrayPOutBlon = null;
  public oracle.sql.BLOB lobPOutBlon = null;
  public String filenamePOutClob = null;
  public char[] byteArrayPOutClob = null;
  public oracle.sql.CLOB lobPOutClob = null;
  public java.io.File paramPInBlob = null;
  public java.io.File paramPInClob = null;
  public java.io.File paramPOutBfile = null;
  public java.io.File paramPOutBlon = null;
  public java.io.File paramPOutClob = null;
  
  protected int bufferSize = 4096;
  
  protected boolean keepLobs = false;
  
  protected boolean useByteArraysForLongsAndLOBS = false;
  
  protected boolean keepFiles = true;
  
  protected java.io.File tempFileDir = new java.io.File (System.getProperty("user.dir"));
  
  protected com.orindasoft.pub.LongObjectLoader objectLoader = new com.orindasoft.pub.LongObjectLoader();
  
  protected String tempFilePrefix = "OSOFT";
  
  protected String tempFileSuffix = ".tmp";
  
  protected boolean createTempLobsIfNeeded = true;
  
  protected boolean deleteTempLobsAfterCall = false;
   
  public static final String procName = "BYTETESTTHEPACKAGE.NORM1";   
                                                    
  public static final int PROC_TYPE = AbstractProcCall.THIS_USERS_OBJECT; 
   
  private StringBuffer procCall = null;
   
  public BytetestthepackageNorm1 (Connection theConnection, LogInterface theLog) 
    {                                                             
    super(theConnection, theLog);                                 
    theLog.debug("BytetestthepackageNorm1 started");  //DEBUG                  
    }                                                             
   
   
  public void setParamPInBlob(java.io.File paramPInBlob)
    {
    this.paramPInBlob = paramPInBlob;
    }
   
  public void setParamPInBlob(byte[] paramPInBlob) throws com.orindasoft.pub.CSException
    {
    if (useByteArraysForLongsAndLOBS)
      {
      byteArrayPInBlob = paramPInBlob;
      }
    else
      {
      java.io.File tempFile = com.orindasoft.pub.IOUtils.loadByteArrayIntoFile(paramPInBlob, tempFilePrefix, tempFileSuffix, tempFileDir.getAbsolutePath(), theLog);
      setParamPInBlob(tempFile);
      }
    }
   
  public void setParamPInBlob(oracle.sql.BLOB lobPInBlob)
    {
    this.lobPInBlob = lobPInBlob;
    }
   
  public void setParamPInBlobToNull()
    {
    this.paramPInBlob = null;
    }
   
  public void setLobPInBlobToNull()
    {
    this.lobPInBlob = null;
    }
   
  public void setParamPInClob(java.io.File paramPInClob)
    {
    this.paramPInClob = paramPInClob;
    }
   
  public void setParamPInClob(String paramPInClob) throws com.orindasoft.pub.CSException
    {
    if (useByteArraysForLongsAndLOBS)
      {
      byteArrayPInClob = paramPInClob.toCharArray();
      }
    else
      {
      java.io.File tempFile = com.orindasoft.pub.IOUtils.loadStringIntoFile(paramPInClob, tempFilePrefix, tempFileSuffix, tempFileDir.getAbsolutePath(), theLog);
      setParamPInClob(tempFile);
      }
    }
   
  public void setParamPInClob(char[] paramPInClob) throws com.orindasoft.pub.CSException
    {
    if (useByteArraysForLongsAndLOBS)
      {
      byteArrayPInClob = paramPInClob;
      }
    else
      {
      java.io.File tempFile = com.orindasoft.pub.IOUtils.loadCharArrayIntoFile(paramPInClob, tempFilePrefix, tempFileSuffix, tempFileDir.getAbsolutePath(), theLog);
      setParamPInClob(tempFile);
      }
    }
   
  public void setParamPInClob(oracle.sql.CLOB lobPInClob)
    {
    this.lobPInClob = lobPInClob;
    }
   
  public void setParamPInClobToNull()
    {
    this.paramPInClob = null;
    }
   
  public void setLobPInClobToNull()
    {
    this.lobPInClob = null;
    }
  
  public void setBufferSize(int bufferSize)
    {
    this.bufferSize = bufferSize;
    theLog.debug("bufferSize set to " + bufferSize);
    }
  
  public void setKeepLobs(boolean keepLobs )
    {
    this.keepLobs = keepLobs;
    theLog.debug("keepLobs set to " + keepLobs);
    }
  
  public void setUseByteArraysForLongsAndLOBS(boolean useByteArraysForLongsAndLOBS)
    {
    this.useByteArraysForLongsAndLOBS = useByteArraysForLongsAndLOBS;
    theLog.debug("useByteArraysForLongsAndLOBSset to " + useByteArraysForLongsAndLOBS);
    }
  
  public void setKeepFiles(boolean keepFiles )
    {
    this.keepFiles = keepFiles;
    theLog.debug("keepFiles set to " + keepFiles);
    }
  
  public void deleteGeneratedFiles()
    {
    theLog.debug("Starting to delete files if they exist");
    theLog.debug("Delete file paramPOutBfile if it exists ");
    if (paramPOutBfile != null)
      {
      if (paramPOutBfile.exists())
        {
        theLog.debug("Deleting file paramPOutBfile");
        paramPOutBfile.delete();
        }
      }
     
    theLog.debug("Delete file paramPOutBlon if it exists ");
    if (paramPOutBlon != null)
      {
      if (paramPOutBlon.exists())
        {
        theLog.debug("Deleting file paramPOutBlon");
        paramPOutBlon.delete();
        }
      }
     
    theLog.debug("Delete file paramPOutClob if it exists ");
    if (paramPOutClob != null)
      {
      if (paramPOutClob.exists())
        {
        theLog.debug("Deleting file paramPOutClob");
        paramPOutClob.delete();
        }
      }
     
    theLog.debug("Finished deleting files");
    }
  
  public void setTempDir(java.io.File tempFileDir) throws CSException
    {
    if (tempFileDir == null)                                   
      {                                                             
      throw (new CSException("Attempt made to set tempFileDir to null")); 
      }                                      
    else if (! tempFileDir.exists())       
      {       
      try    
        {     
        theLog.info("Creating temporary directory " + tempFileDir.getAbsolutePath()); 
        tempFileDir.mkdirs(); 
        }  
      catch (Exception e) 
        { 
        throw (new CSException("tempFileDir " + tempFileDir.getAbsolutePath() + " can not be created"));  
        } 
      }  
    
    this.tempFileDir = tempFileDir;
    theLog.debug("tempFileDir set to " + tempFileDir.getAbsolutePath());
    }
  
  public void setTempFilePrefix(String tempFilePrefix)
    {
    this.tempFilePrefix = tempFilePrefix;
    }
  
  public void setTempFileSuffix(String tempFileSuffix)
    {
    this.tempFileSuffix = tempFileSuffix;
    }
  
  public void setFilenamePOutBfile (String filenamePOutBfile)
    {
    this.filenamePOutBfile = filenamePOutBfile;
    theLog.debug("filenamePOutBfile set to " + filenamePOutBfile);
    }
  
  public void setFilenamePOutBlon (String filenamePOutBlon)
    {
    this.filenamePOutBlon = filenamePOutBlon;
    theLog.debug("filenamePOutBlon set to " + filenamePOutBlon);
    }
  
  public void setFilenamePOutClob (String filenamePOutClob)
    {
    this.filenamePOutClob = filenamePOutClob;
    theLog.debug("filenamePOutClob set to " + filenamePOutClob);
    }
  
  public void setCreateTempLobsIfNeeded(boolean  createTempLobsIfNeeded)
    {
    this.createTempLobsIfNeeded = createTempLobsIfNeeded;
    }
  
  public void setDeleteTempLobsAfterCall(boolean  deleteTempLobsAfterCall)
    {
    this.deleteTempLobsAfterCall = deleteTempLobsAfterCall;
    }
   
   
  public java.io.File getParamPOutBfileFile() 
    {
    return (paramPOutBfile);
    }
   
  public byte[] getParamPOutBfileByteArray() 
    {
    return (byteArrayPOutBfile);
    }
   
  public oracle.sql.BFILE getParamPOutBfileBfile() 
    {
    return (lobPOutBfile);
    }
   
  public java.io.File getParamPOutBlonFile() 
    {
    return (paramPOutBlon);
    }
   
  public byte[] getParamPOutBlonByteArray() 
    {
    return (byteArrayPOutBlon);
    }
   
  public oracle.sql.BLOB getParamPOutBlonBlob() 
    {
    return (lobPOutBlon);
    }
   
  public java.io.File getParamPOutClobFile() 
    {
    return (paramPOutClob);
    }
   
  public char[] getParamPOutClobByteArray() 
    {
    return (byteArrayPOutClob);
    }
   
  public oracle.sql.CLOB getParamPOutClobClob() 
    {
    return (lobPOutClob);
    }
  
  public int getBufferSize()
    {
    return (bufferSize);
    }
  
  public boolean getKeepLobs()
    {
    return (keepLobs);
    }
  
  public boolean getUseByteArraysForLongsAndLOBS()
    {
    return (useByteArraysForLongsAndLOBS);
    }
  
  public boolean getKeepFiles()
    {
    return (keepFiles);
    }
  
  public java.io.File getTempFileDir()
    {
    return(tempFileDir);
    }
  
  public String getTempFilePrefix()
    {
    return (tempFilePrefix);
    }
  
  public String getTempFileSuffix()
    {
    return (tempFileSuffix);
    }
   
                                                                          
  protected void getStatementResults()  throws CSException 
    {                                                                   
    theLog.debug("Starting to unload data");
    startStatsTimer();
    objectLoader.setBufferSize(bufferSize);
    objectLoader.setKeepFiles(keepFiles);
    
    theParameters.unloadParameters(theCallableStatement); 
    
                                         
    if (! useByteArraysForLongsAndLOBS)    
      {                                      
      if (filenamePOutBfile == null)    
        {                                      
        try                                    
          {                                      
          paramPOutBfile = java.io.File.createTempFile(tempFilePrefix,tempFileSuffix,tempFileDir);   
          }                                                                             
        catch (java.io.IOException e)     
          {                                 
          throw new CSException("Unable to create temp file in " + tempFileDir.getAbsolutePath());   
          }       
        }       
      else    
        {    
        paramPOutBfile = new java.io.File(filenamePOutBfile);    
                                                  
        if (! paramPOutBfile.isAbsolute())
          {
          paramPOutBfile = new java.io.File(tempFileDir,filenamePOutBfile);
          }
                                                  
        if (paramPOutBfile.exists()  && ! paramPOutBfile.canWrite())    
          {                                   
          throw new CSException("Can not write to file " + paramPOutBfile.getAbsolutePath() + " - not writable"); 
          }                                      
                                            
        if (paramPOutBfile.isDirectory())   
          {    
          throw new CSException("Can not write to file " + paramPOutBfile.getAbsolutePath() + " - is a Directory"); 
          } 
          
        } 
          
      
      theLog.debug("Unloading parameter paramPOutBfile to file " + paramPOutBfile.getAbsolutePath() );
      
      } 
    else
      {    
      theLog.debug("Unloading parameter paramPOutBfile to array " );
      } 
    
    lobPOutBfile =  (oracle.sql.BFILE)theParameters.getParam(3);    
    if (lobPOutBfile != null && useByteArraysForLongsAndLOBS)
      { 
      byteArrayPOutBfile = objectLoader.unloadBfileIntoByteArray(lobPOutBfile);   
      }
    else if (lobPOutBfile != null && (! keepLobs))
      { 
      paramPOutBfile = objectLoader.unloadBfile(paramPOutBfile,lobPOutBfile);   
      }
    
                                         
    if (! useByteArraysForLongsAndLOBS)    
      {                                      
      if (filenamePOutBlon == null)    
        {                                      
        try                                    
          {                                      
          paramPOutBlon = java.io.File.createTempFile(tempFilePrefix,tempFileSuffix,tempFileDir);   
          }                                                                             
        catch (java.io.IOException e)     
          {                                 
          throw new CSException("Unable to create temp file in " + tempFileDir.getAbsolutePath());   
          }       
        }       
      else    
        {    
        paramPOutBlon = new java.io.File(filenamePOutBlon);    
                                                  
        if (! paramPOutBlon.isAbsolute())
          {
          paramPOutBlon = new java.io.File(tempFileDir,filenamePOutBlon);
          }
                                                  
        if (paramPOutBlon.exists()  && ! paramPOutBlon.canWrite())    
          {                                   
          throw new CSException("Can not write to file " + paramPOutBlon.getAbsolutePath() + " - not writable"); 
          }                                      
                                            
        if (paramPOutBlon.isDirectory())   
          {    
          throw new CSException("Can not write to file " + paramPOutBlon.getAbsolutePath() + " - is a Directory"); 
          } 
          
        } 
          
      
      theLog.debug("Unloading parameter paramPOutBlon to file " + paramPOutBlon.getAbsolutePath() );
      
      } 
    else
      {    
      theLog.debug("Unloading parameter paramPOutBlon to array " );
      } 
    
    try  
      { 
      lobPOutBlon =  (oracle.sql.BLOB)theParameters.getParam(4);    
      if (lobPOutBlon != null && useByteArraysForLongsAndLOBS)
        { 
        byteArrayPOutBlon = objectLoader.unloadBinaryStreamIntoByteArray(lobPOutBlon.getBinaryStream(),"BLOB");   
        }
      else if (lobPOutBlon != null && (! keepLobs))
        { 
        paramPOutBlon = objectLoader.unloadBinaryStream(paramPOutBlon,lobPOutBlon.getBinaryStream(),"BLOB");   
        }
      }                        
    catch (java.sql.SQLException e)   
      {                                 
      throw (new CSException(paramPOutBlon + " could not be unloaded:" + e.toString()));  
      }    
    
                                         
    if (! useByteArraysForLongsAndLOBS)    
      {                                      
      if (filenamePOutClob == null)    
        {                                      
        try                                    
          {                                      
          paramPOutClob = java.io.File.createTempFile(tempFilePrefix,tempFileSuffix,tempFileDir);   
          }                                                                             
        catch (java.io.IOException e)     
          {                                 
          throw new CSException("Unable to create temp file in " + tempFileDir.getAbsolutePath());   
          }       
        }       
      else    
        {    
        paramPOutClob = new java.io.File(filenamePOutClob);    
                                                  
        if (! paramPOutClob.isAbsolute())
          {
          paramPOutClob = new java.io.File(tempFileDir,filenamePOutClob);
          }
                                                  
        if (paramPOutClob.exists()  && ! paramPOutClob.canWrite())    
          {                                   
          throw new CSException("Can not write to file " + paramPOutClob.getAbsolutePath() + " - not writable"); 
          }                                      
                                            
        if (paramPOutClob.isDirectory())   
          {    
          throw new CSException("Can not write to file " + paramPOutClob.getAbsolutePath() + " - is a Directory"); 
          } 
          
        } 
          
      
      theLog.debug("Unloading parameter paramPOutClob to file " + paramPOutClob.getAbsolutePath() );
      
      } 
    else
      {    
      theLog.debug("Unloading parameter paramPOutClob to array " );
      } 
    
    try  
      { 
      lobPOutClob =  (oracle.sql.CLOB)theParameters.getParam(5);    
      if (lobPOutClob != null && useByteArraysForLongsAndLOBS)
        { 
        byteArrayPOutClob = objectLoader.unloadClobIntoCharArray(lobPOutClob);
        }
      else if (lobPOutClob != null && (! keepLobs))
        { 
        paramPOutClob = objectLoader.unloadClob(paramPOutClob, lobPOutClob);   
        }
      }                        
    catch (Exception e)   
      {                                 
      throw (new CSException(paramPOutClob + " could not be unloaded:" + e.toString()));  
      }    
     
    
    if (deleteTempLobsAfterCall)    
      {
      try
        {
        if (lobPInBlob.isTemporary())    
          {
          lobPInBlob.freeTemporary();
          }
     
        if (lobPInClob.isTemporary())    
          {
          lobPInClob.freeTemporary();
          }
     
        }
      catch (SQLException e) 
        {
        theLog.warning("getStatementResults: Unable to release temporary LOBS:" + e.toString()); 
        }
      }
     
    try 
      { 
      theCallableStatement.clearParameters(); 
      theParameters.clearParameters(); 
      } 
    catch (SQLException e) 
      {
      throw (new CSException("getStatementResults: Unable to clear parameters:" + e.toString())); 
      }
    incRetrieveTime();
    theLog.debug("Finished unloading data");
    }     
            
                                                                          
                                                                          
  protected void bindParams() throws CSException 
    {                                                                   
    theLog.debug("Starting to bind parameters");
    
    theLog.debug("binding input parameter paramPInBlob to position 1");
    try  
      {  
      if (paramPInBlob != null || byteArrayPInBlob != null)
        {                 
        if (lobPInBlob == null)
          {                 
          if (createTempLobsIfNeeded)
            {                 
            lobPInBlob = oracle.sql.BLOB.createTemporary(theConnection, true, oracle.sql.BLOB.DURATION_SESSION);
            }                 
          else
            {                 
            throw (new CSException("No LOB Pointer Provided"));
            }                 
          }                 
           
        if (   byteArrayPInBlob != null && lobPInBlob.length() > byteArrayPInBlob.length      
            || paramPInBlob != null && lobPInBlob.length() > paramPInBlob.length())      
          {                                                                                                                   
          lobPInBlob.truncate(0);   
          } 
        if (byteArrayPInBlob != null)
          {                                                                                                                   
          com.orindasoft.pub.LongObjectLoader.loadBLOB(lobPInBlob,byteArrayPInBlob);     
          } 
        else
          {                                                                                                                   
          com.orindasoft.pub.LongObjectLoader.loadBLOB(lobPInBlob,paramPInBlob,bufferSize);     
          } 
        }   
                                                                                           
      theParameters.setParam(1,lobPInBlob);
      }   
    catch (SQLException e)   
      {           
      throw (new CSException("paramPInBlob could not be loaded SQLException:" + e.toString()));   
      }          
    catch (CSException e)   
      {           
      throw (new CSException("paramPInBlob could not be loaded:" + e.toString()));   
      }          
    
    theLog.debug("binding input parameter paramPInClob to position 2");
    try  
      {  
      if (paramPInClob != null || byteArrayPInClob != null)
        {                 
        if (lobPInClob == null)
          {                 
          if (createTempLobsIfNeeded)
            {                 
            lobPInClob = oracle.sql.CLOB.createTemporary(theConnection, true, oracle.sql.CLOB.DURATION_SESSION);
            }                 
          else
            {                 
            throw (new CSException("No LOB Pointer Provided"));
            }                 
          }                 
           
        if (   byteArrayPInClob != null && lobPInClob.length() > byteArrayPInClob.length      
            || paramPInClob != null && lobPInClob.length() > paramPInClob.length())      
          {                                                                                                                   
          lobPInClob.truncate(0);   
          } 
        if (byteArrayPInClob != null)
          {                                                                                                                   
          com.orindasoft.pub.LongObjectLoader.loadCLOB(lobPInClob,byteArrayPInClob);     
          } 
        else
          {                                                                                                                   
          com.orindasoft.pub.LongObjectLoader.loadCLOB(lobPInClob,paramPInClob,bufferSize);     
          } 
        }   
                                                                                           
      theParameters.setParam(2,lobPInClob);
      }   
    catch (SQLException e)   
      {           
      throw (new CSException("paramPInClob could not be loaded SQLException:" + e.toString()));   
      }          
    catch (CSException e)   
      {           
      throw (new CSException("paramPInClob could not be loaded:" + e.toString()));   
      }          
    theLog.debug("binding output parameter paramPOutBfile to position 3" );
    theParameters.setOutParam(3,OracleTypes.BFILE);
    theLog.debug("binding output parameter paramPOutBlon to position 4" );
    theParameters.setOutParam(4,OracleTypes.BLOB);
    theLog.debug("binding output parameter paramPOutClob to position 5" );
    theParameters.setOutParam(5,OracleTypes.CLOB);
    theLog.debug("Associating parameters with statement");
    theParameters.bindParameters(theCallableStatement); 
    theLog.debug("Finished binding parameters");
    }     
            
                                                                          
   
   
  public boolean releaseResources() 
    { 
    
    theLog.debug("Attempting to release LOB's");
    if (lobPInBlob != null)
      {
      lobPInBlob = null; 
      }
    
    if (lobPInClob != null)
      {
      lobPInClob = null; 
      }
    
    if (lobPOutBfile != null)
      {
      lobPOutBfile = null; 
      }
    
    if (lobPOutBlon != null)
      {
      lobPOutBlon = null; 
      }
    
    if (lobPOutClob != null)
      {
      lobPOutClob = null; 
      }
    
    
    return(super.releaseResources()); 
    } 
  
  public String getProcCallStatement()                                             
    {                                                              
    if (procCall == null)
      {                                                              
      procCall = new StringBuffer("BEGIN BYTETESTTHEPACKAGE.NORM1(P_IN_BLOB =>  ?, P_IN_CLOB =>  ?, P_OUT_BFILE =>  ?, P_OUT_BLON =>  ?, P_OUT_CLOB =>  ?); END; ");
      
      }     
    return(procCall.toString());
    }     
            
} // Generated by JDBCWizard 6.0.3145 
